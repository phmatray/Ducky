@page "/"
@inject IStore Store
@inject IRootStateSerializer RootStateSerializer

<PageTitle>R3dux</PageTitle>

<MudGrid>
  <MudItem xs="12">
    <MudText Typo="Typo.h3">Serialized State</MudText>
  </MudItem>
  
  @if (_rootStateSerialized is not null)
  {
    <MudItem xs="12">
      <MudPaper Class="pa-4 overflow-auto">
        <JsonMarkup Data="@_rootStateSerialized"/>
      </MudPaper>
    </MudItem>
  }
</MudGrid>

@code
{
  private string? _rootStateSerialized;

  /// <inheritdoc />
  protected override void OnInitialized()
  {
    var rootState = Store.RootStateObservable.FirstSync();
    _rootStateSerialized = RootStateSerializer.Serialize(rootState);
  }
}
